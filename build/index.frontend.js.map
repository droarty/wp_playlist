{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers/time_helpers.js","webpack:///./src/index.frontend.js"],"names":["seconds_to_minutes","seconds","toString","indexOf","minutes_to_seconds","parseInt","sec","min","slice","minutes_string","parts","split","isNaN","document","addEventListener","playlists","getElementsByClassName","Array","from","forEach","playlist_node","url","src","player","getElementsByTagName","playlist","ontimeupdate","currentTime","record","node","classList","remove","start","end","add","onpause","clip_node","dataset","playlistClipStart","playlistClipEnd","push","contains","play","pause"],"mappings":"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","file":"index.frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.frontend.js\");\n","export function seconds_to_minutes(seconds) {\n  if (seconds.toString().indexOf(\":\")) seconds = minutes_to_seconds(seconds.toString())\n  seconds = parseInt(seconds);\n  const sec = seconds % 60\n  const min = parseInt(seconds / 60)\n  return `${min}:${(\"00\" + sec.toString()).slice(-2)}`\n}\n\nexport function minutes_to_seconds(minutes_string) {\n  if (minutes_string.indexOf(\":\") == -1) return parseInt(minutes_string)\n\n  const parts = minutes_string.split(\":\");\n  const sec = parseInt(parts[1]);\n  const min = parseInt(parts[0]);\n  if (isNaN(min)) return sec;\n  if (isNaN(sec)) return min * 60;\n  return min * 60 + sec;\n}","// This script is for the frontend of the playlist block\nimport { seconds_to_minutes, minutes_to_seconds } from './helpers/time_helpers.js'\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\tconst playlists = document.getElementsByClassName(\"wp-block-create-block-playlist\");\n\tArray.from(playlists).forEach(playlist_node => {\n\t\tconst url = playlist_node.src;\n\t\tconst player = playlist_node.getElementsByTagName(\"audio\")[0];\n\t\tconst playlist = [];\n\t\tplayer.ontimeupdate = () => {\n\t\t\tconst currentTime = player.currentTime;\n\t\t\tplaylist.forEach(record => {\n\t\t\t\trecord.node.classList.remove(\"paused\");\n\t\t\t\tif (record.start <= currentTime && record.end >= currentTime) {\n\t\t\t\t\trecord.node.classList.add(\"clip-playing\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trecord.node.classList.remove(\"clip-playing\");\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tplayer.onpause = () => {\n\t\t\tplaylist.forEach(record => {\n\t\t\t\trecord.node.classList.add(\"paused\");\n\t\t\t});\n\t\t}\n\n\t\tArray.from(playlist_node.getElementsByClassName(\"playlist-clip\")).forEach(clip_node => {\n\t\t\tconst start = minutes_to_seconds(clip_node.dataset.playlistClipStart);\n\t\t\tconst end = minutes_to_seconds(clip_node.dataset.playlistClipEnd);\n\t\t\tplaylist.push({ start, end, node: clip_node });\n\t\t\tclip_node.addEventListener(\"click\", () => {\n\t\t\t\tif (!clip_node.classList.contains('clip-playing')) {\n\t\t\t\t\tplayer.currentTime = start;\n\t\t\t\t\tplayer.play();\n\t\t\t\t}\n\t\t\t\telse if (clip_node.classList.contains('paused')) {\n\t\t\t\t\tplayer.play();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tplayer.pause();\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t});\n});"],"sourceRoot":""}